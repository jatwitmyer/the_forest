{"ast":null,"code":"var _jsxFileName = \"/home/jess/Development/code/phase-5/the_forest/client/src/components/Account.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport UserCharacterCard from \"./UserCharacterCard\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Account({\n  user\n}) {\n  _s();\n  const [allAchievements, setAllAchievements] = useState([]);\n  const [achievementFks, setAchievementFks] = useState([]);\n  const [showEditForm, setShowEditForm] = useState(false);\n  const [newUsername, setNewUsername] = useState(\"\");\n  const [newPassword, setNewPassword] = useState(\"\");\n  useEffect(() => {\n    fetch('/achievements').then(r => r.json()).then(data => setAllAchievements(data));\n  }, []);\n  useEffect(() => {\n    fetch(`/users_achievements_by_user/${user.id}`).then(r => r.json()).then(uas => {\n      const achievement_fks = uas.map(userAchievement => userAchievement.achievement_fk);\n      setAchievementFks(achievement_fks);\n    });\n  }, [user.id]);\n  const yourAchievements = achievementFks.map(achievementFk => allAchievements.filter(item => item.id === achievementFk)[0]);\n  console.log(yourAchievements);\n  const renderedAchievements = yourAchievements.map(a => /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: [a.id, \". \", a.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 74\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: a.summary\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 97\n    }, this)]\n  }, a.id, true, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 58\n  }, this));\n  function handleEditUser(e) {\n    e.preventDefault();\n    console.log(\"submitted form\");\n    fetch(`/users/${user.id}`, {\n      method: 'PATCH',\n      headers: {\n        'Content-type': 'application/json; charset=UTF-8'\n      },\n      body: JSON.stringify({\n        username: newUsername,\n        password: newPassword\n      })\n    }).then(r => r.json()).then(data => console.log(data));\n  }\n  console.log(newUsername);\n  console.log(newPassword);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"account\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Account Details\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Username: \", user.username]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), showEditForm ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleEditUser,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"newUsername\",\n          defaultValue: user.username,\n          onChange: e => setNewUsername(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"newPassword\",\n          value: newPassword,\n          onChange: e => setNewPassword(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          value: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setShowEditForm(true),\n      children: \"Edit Username and Password\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      children: \"Delete Account\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Your Achievements: \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), renderedAchievements]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n}\n_s(Account, \"J7KxJ4DUGmBllcDcuDbvZ9Mx/p8=\");\n_c = Account;\nexport default Account;\nvar _c;\n$RefreshReg$(_c, \"Account\");","map":{"version":3,"names":["React","useEffect","useState","UserCharacterCard","jsxDEV","_jsxDEV","Fragment","_Fragment","Account","user","_s","allAchievements","setAllAchievements","achievementFks","setAchievementFks","showEditForm","setShowEditForm","newUsername","setNewUsername","newPassword","setNewPassword","fetch","then","r","json","data","id","uas","achievement_fks","map","userAchievement","achievement_fk","yourAchievements","achievementFk","filter","item","console","log","renderedAchievements","a","children","name","fileName","_jsxFileName","lineNumber","columnNumber","summary","handleEditUser","e","preventDefault","method","headers","body","JSON","stringify","username","password","className","onSubmit","type","defaultValue","onChange","target","value","onClick","_c","$RefreshReg$"],"sources":["/home/jess/Development/code/phase-5/the_forest/client/src/components/Account.js"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport UserCharacterCard from \"./UserCharacterCard\"\n\nfunction Account( {user} ) {\n  const [allAchievements, setAllAchievements] = useState([])\n  const [achievementFks, setAchievementFks] = useState([])\n  const [showEditForm, setShowEditForm] = useState(false)\n  const [newUsername, setNewUsername] = useState(\"\")\n  const [newPassword, setNewPassword] = useState(\"\")\n\n  useEffect(() => {\n    fetch('/achievements')\n    .then(r => r.json())\n    .then(data => setAllAchievements(data))\n  }, [])\n  \n  useEffect(() => {\n    fetch(`/users_achievements_by_user/${user.id}`)\n    .then(r => r.json())\n    .then(uas => {\n      const achievement_fks = uas.map(userAchievement => userAchievement.achievement_fk)\n      setAchievementFks(achievement_fks)\n      }) \n  }, [user.id])\n\n  const yourAchievements = (achievementFks.map(achievementFk => allAchievements.filter(item => item.id === achievementFk)[0]))\n  console.log(yourAchievements)\n\n  const renderedAchievements = yourAchievements.map(a => <div key={a.id}><p>{a.id}. {a.name}</p><p>{a.summary}</p></div>)\n\n  function handleEditUser(e) {\n    e.preventDefault()\n    console.log(\"submitted form\")\n    fetch(`/users/${user.id}`, {\n      method: 'PATCH',\n      headers: {'Content-type': 'application/json; charset=UTF-8'},\n      body: JSON.stringify({\n        username: newUsername,\n        password: newPassword\n      })\n    })\n    .then(r => r.json())\n    .then(data => console.log(data))\n  }\n\n  console.log(newUsername)\n  console.log(newPassword)\n\n  return (\n    <div className=\"account\">\n      <h1>Account Details</h1>\n      <p>Username: {user.username}</p>\n      {showEditForm ? \n        <div>\n          <form onSubmit={handleEditUser}>\n            <label>Username</label>\n            <input\n              type=\"text\"\n              name=\"newUsername\"\n              defaultValue={user.username}\n              onChange={(e) => setNewUsername(e.target.value)}\n            ></input>\n            <br/>\n            <label>Password</label>\n            <input\n              type=\"text\"\n              name=\"newPassword\"\n              value={newPassword}\n              onChange={(e) => setNewPassword(e.target.value)}\n            ></input>\n            <br/>\n            <input type=\"submit\" value=\"Submit\" />\n          </form>\n        </div> : <></>}\n      <button onClick={() => setShowEditForm(true)}>Edit Username and Password</button>\n      <button>Delete Account</button>\n      <h3>Your Achievements: </h3>\n      {renderedAchievements}\n    </div>\n  )\n}\n\nexport default Account\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}