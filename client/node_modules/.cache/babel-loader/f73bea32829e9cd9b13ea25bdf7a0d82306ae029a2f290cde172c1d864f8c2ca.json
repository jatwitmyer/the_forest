{"ast":null,"code":"var _jsxFileName = \"/home/jess/Development/code/phase-5/the_forest/client/src/components/Account.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport UserCharacterCard from \"./UserCharacterCard\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Account({\n  user,\n  setUser\n}) {\n  _s();\n  const [allAchievements, setAllAchievements] = useState([]);\n  const [achievementFks, setAchievementFks] = useState([]);\n  const [showEditForm, setShowEditForm] = useState(false);\n  const [newUsername, setNewUsername] = useState(\"\");\n  // const [newPassword, setNewPassword] = useState(\"\")\n  const [showDeleteVerification, setShowDeleteVerification] = useState(false);\n  useEffect(() => {\n    fetch('/achievements').then(r => r.json()).then(data => setAllAchievements(data));\n  }, []);\n  useEffect(() => {\n    fetch(`/users_achievements_by_user/${user.id}`).then(r => r.json()).then(uas => {\n      const achievement_fks = uas.map(userAchievement => userAchievement.achievement_fk);\n      setAchievementFks(achievement_fks);\n    });\n  }, [user.id]);\n  const yourAchievements = achievementFks.map(achievementFk => allAchievements.filter(item => item.id === achievementFk)[0]);\n  // console.log(yourAchievements)\n\n  const renderedAchievements = yourAchievements.map(a => /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: [a.id, \". \", a.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 74\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: a.summary\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 97\n    }, this)]\n  }, a.id, true, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 58\n  }, this));\n  function handleEditUser(e) {\n    e.preventDefault();\n    console.log(\"submitted form\");\n    fetch(`/users/${user.id}`, {\n      method: 'PATCH',\n      headers: {\n        'Content-type': 'application/json; charset=UTF-8'\n      },\n      body: JSON.stringify({\n        username: newUsername\n        // password: newPassword\n      })\n    }).then(r => r.json()).then(data => setUser(data));\n    setShowEditForm(false);\n  }\n\n  // console.log(newUsername)\n  // console.log(newPassword)\n\n  function deleteUser() {}\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"account\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Account Details\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Are you sure you want to delete your account?\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Username: \", user.username]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), showEditForm ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleEditUser,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"newUsername\",\n          defaultValue: user.username,\n          onChange: e => setNewUsername(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          value: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setShowEditForm(true),\n      children: \"Edit Username\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => showDeleteVerification(true),\n      children: \"Delete Account\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Your Achievements: \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), renderedAchievements]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n}\n_s(Account, \"BlLjglTowRp/CYeAnmvk8/4UmpM=\");\n_c = Account;\nexport default Account;\nvar _c;\n$RefreshReg$(_c, \"Account\");","map":{"version":3,"names":["React","useEffect","useState","UserCharacterCard","jsxDEV","_jsxDEV","Fragment","_Fragment","Account","user","setUser","_s","allAchievements","setAllAchievements","achievementFks","setAchievementFks","showEditForm","setShowEditForm","newUsername","setNewUsername","showDeleteVerification","setShowDeleteVerification","fetch","then","r","json","data","id","uas","achievement_fks","map","userAchievement","achievement_fk","yourAchievements","achievementFk","filter","item","renderedAchievements","a","children","name","fileName","_jsxFileName","lineNumber","columnNumber","summary","handleEditUser","e","preventDefault","console","log","method","headers","body","JSON","stringify","username","deleteUser","className","onSubmit","type","defaultValue","onChange","target","value","onClick","_c","$RefreshReg$"],"sources":["/home/jess/Development/code/phase-5/the_forest/client/src/components/Account.js"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport UserCharacterCard from \"./UserCharacterCard\"\n\nfunction Account( {user, setUser} ) {\n  const [allAchievements, setAllAchievements] = useState([])\n  const [achievementFks, setAchievementFks] = useState([])\n  const [showEditForm, setShowEditForm] = useState(false)\n  const [newUsername, setNewUsername] = useState(\"\")\n  // const [newPassword, setNewPassword] = useState(\"\")\n  const [showDeleteVerification, setShowDeleteVerification] = useState(false)\n\n  useEffect(() => {\n    fetch('/achievements')\n    .then(r => r.json())\n    .then(data => setAllAchievements(data))\n  }, [])\n  \n  useEffect(() => {\n    fetch(`/users_achievements_by_user/${user.id}`)\n    .then(r => r.json())\n    .then(uas => {\n      const achievement_fks = uas.map(userAchievement => userAchievement.achievement_fk)\n      setAchievementFks(achievement_fks)\n      }) \n  }, [user.id])\n\n  const yourAchievements = (achievementFks.map(achievementFk => allAchievements.filter(item => item.id === achievementFk)[0]))\n  // console.log(yourAchievements)\n\n  const renderedAchievements = yourAchievements.map(a => <div key={a.id}><p>{a.id}. {a.name}</p><p>{a.summary}</p></div>)\n\n  function handleEditUser(e) {\n    e.preventDefault()\n    console.log(\"submitted form\")\n    fetch(`/users/${user.id}`, {\n      method: 'PATCH',\n      headers: {'Content-type': 'application/json; charset=UTF-8'},\n      body: JSON.stringify({\n        username: newUsername,\n        // password: newPassword\n      })\n    })\n    .then(r => r.json())\n    .then(data => setUser(data))\n    setShowEditForm(false)\n  }\n\n  // console.log(newUsername)\n  // console.log(newPassword)\n\n  function deleteUser() {\n\n  }\n\n  return (\n    <div className=\"account\">\n      <h1>Account Details</h1>\n      <p>Are you sure you want to delete your account?</p>\n      <p>Username: {user.username}</p>\n      {showEditForm ? \n        <div>\n          <form onSubmit={handleEditUser}>\n            <label>Username</label>\n            <input\n              type=\"text\"\n              name=\"newUsername\"\n              defaultValue={user.username}\n              onChange={(e) => setNewUsername(e.target.value)}\n            ></input>\n            <br/>\n            <input type=\"submit\" value=\"Submit\"/>\n          </form>\n        </div> : <></>}\n      <button onClick={() => setShowEditForm(true)}>Edit Username</button>\n      <button onClick={() => showDeleteVerification(true)}>Delete Account</button>\n      <h3>Your Achievements: </h3>\n      {renderedAchievements}\n    </div>\n  )\n}\n\nexport default Account\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}