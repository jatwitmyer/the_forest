{"ast":null,"code":"var _jsxFileName = \"/home/jess/Development/code/phase-5/the_forest/client/src/components/Account.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport UserCharacterCard from \"./UserCharacterCard\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Account({\n  user,\n  setUser\n}) {\n  _s();\n  const [allAchievements, setAllAchievements] = useState([]);\n  const [achievementFks, setAchievementFks] = useState([]);\n  const [showEditForm, setShowEditForm] = useState(false);\n  const [newUsername, setNewUsername] = useState(\"\");\n  // const [newPassword, setNewPassword] = useState(\"\")\n  const [showDeleteVerification, setShowDeleteVerification] = useState(false);\n  const navigate = useNavigate();\n  useEffect(() => {\n    fetch('/achievements').then(r => r.json()).then(data => setAllAchievements(data));\n  }, []);\n  useEffect(() => {\n    fetch(`/users_achievements_by_user/${user.id}`).then(r => r.json()).then(uas => {\n      const achievement_fks = uas.map(userAchievement => userAchievement.achievement_fk);\n      setAchievementFks(achievement_fks);\n    });\n  }, [user.id]);\n  const yourAchievements = achievementFks.map(achievementFk => allAchievements.filter(item => item.id === achievementFk)[0]);\n  // console.log(yourAchievements)\n\n  const renderedAchievements = yourAchievements.map(a => /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: [a.id, \". \", a.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 74\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: a.summary\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 97\n    }, this)]\n  }, a.id, true, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 58\n  }, this));\n  function handleEditUser(e) {\n    e.preventDefault();\n    console.log(\"submitted form\");\n    fetch(`/users/${user.id}`, {\n      method: 'PATCH',\n      headers: {\n        'Content-type': 'application/json; charset=UTF-8'\n      },\n      body: JSON.stringify({\n        username: newUsername,\n        password_hash: newPassword\n      })\n    }).then(r => r.json()).then(data => setUser(data));\n    setShowEditForm(false);\n  }\n\n  // console.log(newUsername)\n  // console.log(newPassword)\n\n  function handleDelete() {\n    fetch(`/users/${user.id}`, {\n      method: 'DELETE',\n      headers: {\n        'Content-type': 'application/json; charset=UTF-8'\n      },\n      body: {}\n    }).then(data => {\n      setUser(null);\n      navigate('/');\n      console.log(\"delete successful\");\n    });\n    setShowDeleteVerification(false);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"account\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Account Details\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), showDeleteVerification ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Are you sure you wish to delete your account?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleDelete,\n        children: \"Delete My Account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShowDeleteVerification(false),\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 32\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Username: \", user.username]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), showEditForm ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleEditUser,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"newUsername\",\n          defaultValue: user.username,\n          onChange: e => setNewUsername(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          value: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setShowEditForm(true),\n      children: \"Edit Username\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setShowDeleteVerification(true),\n      children: \"Delete Account\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Your Achievements: \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), renderedAchievements]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n}\n_s(Account, \"aQ7M0lWf1B6m9ZFuSILzyh/tycw=\", false, function () {\n  return [useNavigate];\n});\n_c = Account;\nexport default Account;\nvar _c;\n$RefreshReg$(_c, \"Account\");","map":{"version":3,"names":["React","useEffect","useState","UserCharacterCard","useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","Account","user","setUser","_s","allAchievements","setAllAchievements","achievementFks","setAchievementFks","showEditForm","setShowEditForm","newUsername","setNewUsername","showDeleteVerification","setShowDeleteVerification","navigate","fetch","then","r","json","data","id","uas","achievement_fks","map","userAchievement","achievement_fk","yourAchievements","achievementFk","filter","item","renderedAchievements","a","children","name","fileName","_jsxFileName","lineNumber","columnNumber","summary","handleEditUser","e","preventDefault","console","log","method","headers","body","JSON","stringify","username","password_hash","newPassword","handleDelete","className","onClick","onSubmit","type","defaultValue","onChange","target","value","_c","$RefreshReg$"],"sources":["/home/jess/Development/code/phase-5/the_forest/client/src/components/Account.js"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport UserCharacterCard from \"./UserCharacterCard\"\nimport { useNavigate } from \"react-router-dom\";\n\nfunction Account( {user, setUser} ) {\n  const [allAchievements, setAllAchievements] = useState([])\n  const [achievementFks, setAchievementFks] = useState([])\n  const [showEditForm, setShowEditForm] = useState(false)\n  const [newUsername, setNewUsername] = useState(\"\")\n  // const [newPassword, setNewPassword] = useState(\"\")\n  const [showDeleteVerification, setShowDeleteVerification] = useState(false)\n\n  const navigate = useNavigate()\n\n  useEffect(() => {\n    fetch('/achievements')\n    .then(r => r.json())\n    .then(data => setAllAchievements(data))\n  }, [])\n  \n  useEffect(() => {\n    fetch(`/users_achievements_by_user/${user.id}`)\n    .then(r => r.json())\n    .then(uas => {\n      const achievement_fks = uas.map(userAchievement => userAchievement.achievement_fk)\n      setAchievementFks(achievement_fks)\n      }) \n  }, [user.id])\n\n  const yourAchievements = (achievementFks.map(achievementFk => allAchievements.filter(item => item.id === achievementFk)[0]))\n  // console.log(yourAchievements)\n\n  const renderedAchievements = yourAchievements.map(a => <div key={a.id}><p>{a.id}. {a.name}</p><p>{a.summary}</p></div>)\n\n  function handleEditUser(e) {\n    e.preventDefault()\n    console.log(\"submitted form\")\n    fetch(`/users/${user.id}`, {\n      method: 'PATCH',\n      headers: {'Content-type': 'application/json; charset=UTF-8'},\n      body: JSON.stringify({\n        username: newUsername,\n        password_hash: newPassword\n      })\n    })\n    .then(r => r.json())\n    .then(data => setUser(data))\n    setShowEditForm(false)\n  }\n\n  // console.log(newUsername)\n  // console.log(newPassword)\n\n  function handleDelete() {\n    fetch(`/users/${user.id}`, {\n      method: 'DELETE',\n      headers: {'Content-type': 'application/json; charset=UTF-8'},\n      body: {}\n    })\n    .then(data => {\n      setUser(null)\n      navigate('/')\n      console.log(\"delete successful\")})\n    setShowDeleteVerification(false)\n  }\n\n  return (\n    <div className=\"account\">\n      <h1>Account Details</h1>\n      {showDeleteVerification? <div>\n        <h2>Are you sure you wish to delete your account?</h2>\n        <button onClick={handleDelete}>Delete My Account</button>\n        <button onClick={() => setShowDeleteVerification(false)}>Cancel</button>\n      </div> : <></>}\n      <p>Username: {user.username}</p>\n      {showEditForm ? \n        <div>\n          <form onSubmit={handleEditUser}>\n            <label>Username</label>\n            <input\n              type=\"text\"\n              name=\"newUsername\"\n              defaultValue={user.username}\n              onChange={(e) => setNewUsername(e.target.value)}\n            ></input>\n            <br/>\n            <input type=\"submit\" value=\"Submit\"/>\n          </form>\n        </div> : <></>}\n      <button onClick={() => setShowEditForm(true)}>Edit Username</button>\n      <button onClick={() => setShowDeleteVerification(true)}>Delete Account</button>\n      <h3>Your Achievements: </h3>\n      {renderedAchievements}\n    </div>\n  )\n}\n\nexport default Account\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}